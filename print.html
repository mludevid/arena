<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Arena</title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="hello_world.html"><strong aria-hidden="true">2.</strong> Hello World</a></li><li class="chapter-item expanded "><a href="module.html"><strong aria-hidden="true">3.</strong> Modules</a></li><li class="chapter-item expanded "><a href="functions.html"><strong aria-hidden="true">4.</strong> Functions</a></li><li class="chapter-item expanded "><a href="data_types.html"><strong aria-hidden="true">5.</strong> Data Types</a></li><li class="chapter-item expanded "><a href="operators.html"><strong aria-hidden="true">6.</strong> Operators</a></li><li class="chapter-item expanded "><a href="variables.html"><strong aria-hidden="true">7.</strong> Variables</a></li><li class="chapter-item expanded "><a href="control_flow.html"><strong aria-hidden="true">8.</strong> Control Flow</a></li><li class="chapter-item expanded "><a href="imports.html"><strong aria-hidden="true">9.</strong> Imports</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Arena</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p><code>Arena</code> is a typed, functional and natively compiled programming language. It was created to compare garbage collection algorithms. To be fair battleground for the competing algorithms it does not have any optimizations regarding memory management. Even though the language is kept as minimalistic as possible to simplify the development of the compiler it does implement all core features of a typed, functional programming language: it has immutable variables, user defined types, pattern matching, functions, type checking and an import system.</p>
<p>Currently <code>Arena</code> features three garbage collection algorithms that can be selected at compile time:</p>
<ul>
<li><code>Spill</code> as the name suggest allocates all objects on the heap with a call to the <code>malloc</code> function provided in <code>libc</code> and then never frees this storage until the program terminates.</li>
<li><code>ARC</code> stands for automatic reference counting and is the default garbage collection algorithm. Every allocated object on the heap maintains a counter of the existing pointer to it. When this counter reaches 0 the object is no longer accessible and can therefore be freed.</li>
<li><code>TGC</code> is the tracing garbage collection algorithm, currenlty a basic mark and copy collector. The available heap space is divided into two parts: an active and a copy heap. When the active heap is full a garbage collection pass is triggered which traverses the stack and copies all reachable objects to the copy heap. Afterwards the roles are swiched and the copy heap becomes the active one until the next collection.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="hello-world"><a class="header" href="#hello-world">Hello World</a></h1>
<p>When learning a new programming language it is mandatory to write a <code>Hello World</code>
program. For <code>Arena</code> it looks as follows:</p>
<p>Filename: hello_world.arena</p>
<pre><code>fn main() = print(&quot;Hello World!\n&quot;)
</code></pre>
<p>To compile the program you need to call the <code>Arena</code> compiler and pass it the
correct filename. Afterwards you can execute the binary. The default binary name
is <code>out</code>.</p>
<pre><code class="language-bash">$ arena hello_word.arena
$ ./out
</code></pre>
<p>If you want to specify another name you can do so with the <code>-o</code> flag.</p>
<pre><code class="language-bash">$ arena hello_word.arena -o hello
$ ./hello
</code></pre>
<p>If you want to learn about all the other existing compiler flags you can list them with:</p>
<pre><code class="language-bash">$ arena --help
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="module"><a class="header" href="#module">Module</a></h1>
<p>Each file with the extension <code>.arena</code> is interpreted by the <code>Arena</code> compiler as a module.</p>
<p>Each module consists of imports at the top of the file, afterward type definitions and finally arbitrary many function definitions. The compiler needs a <code>main</code> function in the provided module as the entry-point of the compiled binary, this is not necessary for imported modules.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="functions"><a class="header" href="#functions">Functions</a></h1>
<p>A function in <code>Arena</code> has to have a defined set of typed input parameters, a return type and the body of the function. For example, a function <code>between</code> that checks if a number <code>a</code> lays between two numbers <code>b</code> and <code>c</code> would be defined like this:</p>
<pre><code>fn between(a: i32, b: i32, c: i32) -&gt; bool = a &gt; b &amp;&amp; a &lt; c
</code></pre>
<p>The instructions after the <code>=</code> are the body of the function. Given a specific instantiation of the function parameters the body outputs a value of the return type of the function. If the return type is <code>void</code> the function does not return anything.</p>
<p>Function calls are performed similar to other mainstream languages by passing the arguments between round brackets. To check if <code>1</code> is smaller than <code>3</code> and larger than <code>-1</code> you can use:</p>
<pre><code>between(1, -1, 3)
</code></pre>
<p>A function with return type <code>void</code> will drop the last computed value and not return anything. <code>void</code> is the default return type of a function and can be omitted in the function definition:</p>
<pre><code>fn println(s: str) -&gt; void = print(s); print(&quot;\n&quot;)

// Or:

fn println(s: str) = print(s); print(&quot;\n&quot;)
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="data-types"><a class="header" href="#data-types">Data Types</a></h1>
<p>Arena currently has 4 primitive data types:</p>
<ul>
<li><code>void</code> is the empty type</li>
<li><code>i32</code> is a signed 32 bit integer</li>
<li><code>bool</code> is a boolean and can therefore either be <code>true</code> of <code>false</code></li>
<li><code>str</code> is a literal String and is defined between two double quotes</li>
</ul>
<p>The user can also define own types. These work similar user defined types in Haskell where the keyword <code>data</code> is used. Each type can have several cases which can contain fields to save data. The instances of these types are always allocated on the heap. The definition of a linked list of integers could look as follows:</p>
<pre><code>type IntList {
    Nil,
    Cons(i32, IntList),
}
</code></pre>
<p>To construct a new instance you need to specify a case of the type and initialize all its fields:</p>
<pre><code>let x = IntList.Cons(1, IntList.Cons(2, IntList.Cons(3, IntList.Nil)));
...
</code></pre>
<p>To access the fields of a user defined type you have to deconstruct the type with a <code>match</code>. Look into the chapter about <a href="control_flow.html">Control Flows</a> to learn more about them.</p>
<p>As mentioned before all used defined types are always allocated on the heap. The garbage collection strategy used to maintain the heap can affect the memory layout and execution time but will never alter the execution result. You can specify one of the three currently available garbage collection strategies with a compile time flag:</p>
<pre><code class="language-bash">$ arena example.arena --spill  # will not free any memory until the program terminates
$ arena example.arena --arc    # automatic reference counting
$ arena example.arena          # arc is the Default
$ arena example.arena --tgc    # tracing garbage collection (mark and copy collector)
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="operators"><a class="header" href="#operators">Operators</a></h1>
<p><code>Arena</code> has the following primitive operators:</p>
<ul>
<li><code>+</code> Adds two integers: <code>2 + 3</code></li>
<li><code>-</code> Subtracts two integers or negates one: <code>2 - 3</code> or <code>-2</code></li>
<li><code>*</code> Multiplies two integers: <code>2 * 3</code></li>
<li><code>/</code> Divides two integers and returns the integer result: <code>2 / 3</code> returns <code>0</code></li>
<li><code>%</code> Divides two integers and returns the remainder: <code>2 % 3</code> returns <code>2</code></li>
<li><code>!</code> Negates a boolean: <code>!true</code> returns <code>false</code> and <code>!false</code> returns <code>true</code></li>
<li><code>||</code> Returns the logical or of two booleans: <code>false || true</code> *</li>
<li><code>&amp;&amp;</code> Returns the logical and of two booleans: <code>true &amp;&amp; false</code> *</li>
<li><code>==</code> Checks the two operands for equality: <code>2 == 3</code></li>
<li><code>!=</code> Checks the two operands for inequality: <code>2 != 3</code></li>
<li><code>&lt;</code> Checks if the first integer is smaller than the second one: <code>2 &lt; 3</code></li>
<li><code>&lt;=</code> Checks if the first integer is smaller than or equal to the second one: <code>2 &lt;= 3</code></li>
<li><code>&gt;</code> Checks if the first integer is larger than the second one: <code>2 &gt; 3</code></li>
<li><code>&gt;=</code> Checks if the first integer is larger than or equal to the second one: <code>2 &gt;= 3</code></li>
</ul>
<p>* Both logical operators are lazy and only compute the second operant if
necessary</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="variables"><a class="header" href="#variables">Variables</a></h1>
<p>Like most programming languages <code>Arena</code> also features variables. But as all
functional languages this name is not really appropiate as they are immutable.</p>
<p>They work as one may expect: first the variables value is defined and afterwards
this value can be accessed by the variables name:</p>
<pre><code>fn main() =
    let x = 10;
    if x == 10 then
        print(&quot;x has the value 10\n&quot;)
    else
        print(&quot;something went very wrong\n&quot;)
</code></pre>
<p>This is also the first time that we see the semicolon <code>;</code>. It is compulsory
after variable definitions as the definition itself does not return any value
and the expression is therefore not complete yet. But it can also be used to
concatenate two expressions. This does only make sense if the first expression
has side effects. Pure functional programming languages in a mathematical sense should not have any side effects but
all languages end up having some mainly through interactions with <code>IO</code>:</p>
<pre><code>fn main() =
    print(&quot;Hello &quot;);
    print(&quot;World!&quot;);
    print(&quot;\n&quot;)
</code></pre>
<p>It's important to keep in mind that parenthesis in <code>Arena</code> also function as a
namespace. Therefore all variables defined inside a parenthesis block can not be
accessed after the namespace is closed and exited:</p>
<pre><code>fn main() =
    // accessing y outside of the then block would result in an compilation error
    let x = if true then (let y = 1; 2) else 3;
    x
</code></pre>
<p>The main function would exit with the value 2.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="control-flow"><a class="header" href="#control-flow">Control Flow</a></h1>
<p>Currently there is only one control flow construct: the <code>if</code> expression:</p>
<h2 id="if-expression"><a class="header" href="#if-expression"><code>if</code> expression</a></h2>
<p>As usual for all functional programming languages all control flow constructs
are expressions instead of statements and therefore always return a value. This
is not different for <code>Arena</code>. The knowledge
acquired in previous chapters combined with an <code>if</code> expression suffices to calculate the 40th fibonacci number:</p>
<pre><code>fn main() = fib(40)

fn fib(n: i32) -&gt; i32 =
    if n &lt; 1 then
        n
    else
        fib(n-1) + fib(n-2)
</code></pre>
<p>If either the <code>then</code> or the <code>else</code> block include an expression with a semicolon
you have to surround the block with curly brackets to resolve possible
ambiguities of the location of the end of the block.</p>
<p>Alternatively you can use the fact, that in <code>Arena</code>paranthesis can include any
expression. This allows you to surround the block that includes a semicolon with
paranthesis instead of surrounding both with curly brackets.</p>
<p>Round brackets in general and curly brackets specifically for <code>if</code> expressions can also always be added precautisouly.</p>
<pre><code>fn print_n_times(str: String, n: i32) =
    if n &lt;= 1 then
        print(str)
    else {
        print(str);
        print_n_times(str, n-1)
    }

// Or:

fn print_n_times(str: String, n: i32) =
    if n &lt;= 1 then
        print(str)
    else (
        print(str);
        print_n_times(str, n-1)
    )

// Or:

fn print_n_times(str: String, n: i32) =
    if n &lt;= 1 then {
        print(str)
    } else {
        print(str);
        print_n_times(str, n-1)
    }
</code></pre>
<h2 id="match-expression"><a class="header" href="#match-expression"><code>match</code> expression</a></h2>
<p>The <code>match</code> keyword also starts an expression and is mainly used to deconstruct
user defined types. Each <code>match</code> expression takes an object and tries to match
it against a set of patterns. The body of the first pattern that succeeds will
be executed populating the variables defined in the pattern with the
corresponding values. This example shows how a spaced print could be implemented for
a linked list of words.</p>
<pre><code>type List {
    Nil,
    Cons(String, List),
}

fn printList(l: List) =
    match l {
        List.Nil =&gt; print(&quot;\n&quot;),
        List.Cons(w, List.Nil) =&gt; print(w); print(&quot;\n&quot;),
        List.Cons(w, tail) =&gt; print(w); print(&quot; &quot;); printList(tail),
    }
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="imports"><a class="header" href="#imports">Imports</a></h1>
<p>Every module can have arbitrary many imports statements at the top of the file.</p>
<p>There are three options to import another module. If the file is located in the
same directory as the current one and the file name is an allowed identifier in
arena (contains letters, numbers, and underscores and does not start with a
number) then you can import the module as follows:</p>
<pre><code>import other_module

// or if you want to use the module with the name 'lib':

import other_mode as lib
</code></pre>
<p>If you need to define a relative path or the name is not an allowed indentifier
you need to use quotes around the import path and you need to give the imported
module a name to be used by in the current module:</p>
<pre><code>import &quot;subfolder/other_module&quot; as lib
</code></pre>
<p>All functions and types defined in the other module can now be used in the
current module by prefixing the function or type name with the identifier
specified during importation separatied by two colon. For example, to call a
function <code>foo</code> defined in the <code>other_module</code> which was given the identifier
<code>lib</code> during its importation would work like this:</p>
<pre><code>import other_module as lib

fn main() = lib::foo()
</code></pre>
<p>If the imported file is not found relative to the current path, the compiler will search for it in two other locations: the user wide library folder: <code>~/.arena/lib/</code> and the system wide library collection in the lib subfolder of the installation directory of the arena compiler.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->

        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </body>
</html>
